<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

  <style>
    body { margin: 0; overflow: hidden; }

    /* Dialogue UI */
    #ui-overlay {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 85%;
      background: rgba(0, 0, 0, 0.85);
      color: #00ffff;
      padding: 15px;
      border-radius: 15px;
      border: 2px solid #00ffff;
      font-family: monospace;
      text-align: center;
      display: none;
      z-index: 100;
    }

    .glitch {
      text-shadow: 2px 2px #ff00ff;
      animation: pulse 1.2s infinite;
    }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.75; }
      100% { opacity: 1; }
    }

    button {
      margin: 6px;
      padding: 8px 14px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: bold;
    }
  </style>
</head>

<body>

<!-- UI Overlay -->
<div id="ui-overlay">
  <p class="glitch" id="dialogue-text">
    Are you sure you want to know about me?
  </p>
  <button onclick="changeMood('creative')" style="background:#00ffff;">Yes üòÑ</button>
  <button onclick="changeMood('curious')" style="background:#ff00ff; color:white;">Tell me more üëÅÔ∏è</button>
</div>

<a-scene
  mindar-image="imageTargetSrc: ./targets.mind;"
  color-space="sRGB"
  renderer="colorManagement: true, physicallyCorrectLights"
  vr-mode-ui="enabled: false"
  device-orientation-permission-ui="enabled: false"
>

  <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

  <!-- Image Target -->
  <a-entity id="card-target" mindar-image-target="targetIndex: 0">

    <!-- Soft Glow Plane -->
    <a-plane
      position="0 0 0"
      width="1.2"
      height="0.7"
      material="color: #00ffff; transparent: true; opacity: 0.2"
      animation="property: material.opacity; from: 0.15; to: 0.4; dir: alternate; dur: 1200; loop: true">
    </a-plane>

    <!-- AR Avatar (Cute + Mystery) -->
    <a-entity
      id="avatar"
      position="0 0.35 0.15"
      scale="0.25 0.25 0.25"
      animation="property: position; y: 0.4; dir: alternate; dur: 2000; loop: true; easing: easeInOutSine">

      <a-sphere radius="0.25" color="#ffffff"></a-sphere>
      <a-sphere radius="0.05" color="black" position="-0.08 0.05 0.22"></a-sphere>
      <a-sphere radius="0.05" color="black" position="0.08 0.05 0.22"></a-sphere>

    </a-entity>

    <!-- Name Text -->
    <a-text
      value="AYUSHI PADHY"
      align="center"
      color="#ffffff"
      position="0 0.75 0"
      scale="0.6 0.6 0.6">
    </a-text>

    <!-- Role Text -->
    <a-text
      value="Engineering Student | AR & VR"
      align="center"
      color="#00ffff"
      position="0 0.65 0"
      scale="0.45 0.45 0.45">
    </a-text>

    <!-- Mood Orb -->
    <a-octahedron
      id="mood-orb"
      position="0.5 0.25 0.15"
      radius="0.1"
      color="#ff00ff"
      animation="property: rotation; to: 0 360 0; loop: true; dur: 3500">
    </a-octahedron>

  </a-entity>
</a-scene>

<script>
  const target = document.querySelector('#card-target');
  const ui = document.querySelector('#ui-overlay');
  const dialogue = document.querySelector('#dialogue-text');
  const avatar = document.querySelector('#avatar');
  const orb = document.querySelector('#mood-orb');

  target.addEventListener("targetFound", () => {
    ui.style.display = "block";
  });

  target.addEventListener("targetLost", () => {
    ui.style.display = "none";
  });

  function changeMood(mode) {
    if (mode === 'creative') {
      dialogue.innerText =
        "I mix creativity with technology and turn ideas into experiences üé®‚ú®";
      avatar.setAttribute('scale', '0.28 0.28 0.28');
      orb.setAttribute('color', '#00ff99');
    } else {
      dialogue.innerText =
        "I observe details, ask questions, and explore reality through AR üëÅÔ∏è";
      avatar.setAttribute('scale', '0.22 0.22 0.22');
      orb.setAttribute('color', '#ff4444');
    }
  }
</script>

</body>
</html>

